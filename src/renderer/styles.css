@tailwind base;
@tailwind components;
@tailwind utilities;

/* App drag region for title bar */
.app-drag {
  -webkit-app-region: drag;
}

/* Command bar button styles */
.cmd-btn {
  @apply px-2 py-1 rounded text-gray-300 hover:bg-toolbar-hover hover:text-white transition-colors text-sm font-medium;
}

.cmd-btn:active {
  @apply bg-gray-600;
}

/* Tab styles */
.tab {
  @apply flex items-center gap-2 px-4 py-2 bg-tab-bg border-r border-tab-border text-gray-400 hover:bg-tab-hover cursor-pointer max-w-48 min-w-0;
}

.tab.active {
  @apply bg-tab-active text-white;
}

.tab-title {
  @apply truncate text-sm;
}

.tab-close {
  @apply opacity-0 hover:opacity-100 text-gray-500 hover:text-white rounded p-0.5 transition-opacity;
}

.tab:hover .tab-close,
.tab.active .tab-close {
  @apply opacity-100;
}

.tab-dirty {
  @apply w-2 h-2 rounded-full bg-blue-400 flex-shrink-0;
}

/* CSS Custom Properties for user settings - applied to root for rem calculation */
:root {
  --editor-font-size: 14px;
  --editor-font-family: monospace;
  /* --editor-fg-color and --editor-bg-color are set dynamically when not default */
}

/* Editor styles */
#editor-container {
  background-color: var(--editor-bg-color, #1e1e1e);
}

#editor {
  tab-size: 4;
  line-height: 1.6;
  font-size: 1rem;
  font-family: var(--editor-font-family);
  color: var(--editor-fg-color, #e5e5e5);
  background-color: var(--editor-bg-color, #1e1e1e);
}

#editor::placeholder {
  @apply text-gray-600;
}

/* Scrollbar styles */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  @apply bg-transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-600 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-500;
}

/* Preview prose styles - using rem for proportional scaling from root font-size */
.prose {
  @apply text-gray-800;
  line-height: 1.6;
  font-size: 1rem;
}

.prose h1 {
  font-size: 2rem;
  @apply font-bold pb-2 border-b border-gray-200;
  margin-bottom: 1rem;
}

.prose h2 {
  font-size: 1.5rem;
  @apply font-bold pb-1 border-b border-gray-100;
  margin-bottom: 0.75rem;
}

.prose h3 {
  font-size: 1.25rem;
  @apply font-semibold;
  margin-bottom: 0.5rem;
}

.prose h4 {
  font-size: 1.125rem;
  @apply font-semibold;
  margin-bottom: 0.5rem;
}

.prose p {
  font-size: 1rem;
  @apply leading-relaxed;
  margin-bottom: 1rem;
}

.prose a {
  @apply text-blue-600 hover:underline;
}

.prose ul,
.prose ol {
  font-size: 1rem;
  margin-bottom: 1rem;
  padding-left: 1.5rem;
}

.prose ul {
  @apply list-disc;
}

.prose ol {
  @apply list-decimal;
}

.prose li {
  margin-bottom: 0.25rem;
}

.prose blockquote {
  font-size: 1rem;
  @apply border-l-4 border-gray-300 italic text-gray-600;
  padding-left: 1rem;
  margin: 1rem 0;
}

.prose code {
  font-size: 0.875rem;
  @apply bg-gray-100 rounded font-mono text-gray-800;
  padding: 0.125rem 0.375rem;
}

.prose pre {
  font-size: 0.875rem;
  @apply bg-gray-900 text-gray-100 rounded-lg overflow-x-auto;
  padding: 1rem;
  margin: 1rem 0;
}

.prose pre code {
  @apply bg-transparent p-0 text-inherit;
  font-size: inherit;
}

.prose img {
  @apply max-w-full h-auto rounded;
  margin: 1rem 0;
}

.prose hr {
  @apply border-gray-200;
  margin: 2rem 0;
}

.prose table {
  font-size: 1rem;
  @apply w-full border-collapse;
  margin-bottom: 1rem;
}

.prose th,
.prose td {
  @apply border border-gray-300 text-left;
  padding: 0.5rem 0.75rem;
}

.prose th {
  @apply bg-gray-50 font-semibold;
}

/* Highlight.js overrides for code blocks */
.hljs {
  @apply bg-transparent;
}

/* Milkdown WYSIWYG editor styles */
#preview .milkdown {
  @apply h-full;
}

#preview .editor {
  @apply h-full outline-none;
}

#preview .ProseMirror {
  @apply h-full outline-none;
  font-size: 1rem;
}

#preview .ProseMirror:focus {
  @apply outline-none;
}

/* Apply settings to preview container */
#preview-container {
  font-family: var(--editor-font-family);
  background-color: var(--editor-bg-color, white);
  color: var(--editor-fg-color, #1f2937);
}

#preview-container .prose {
  font-size: 1rem;
  color: inherit;
  font-family: inherit;
}

#preview-container .ProseMirror {
  color: inherit;
  background-color: inherit;
  font-family: inherit;
}

/* Make the preview container fill available space when Milkdown is active */
#preview-container:not(.hidden) #preview {
  @apply h-full;
}

/* Dark mode for preview - only apply if no custom colors set */
#preview-container.dark-mode {
  background-color: var(--editor-bg-color, #111827);
  color: var(--editor-fg-color, #f3f4f6);
}

#preview-container.dark-mode .prose {
  color: inherit;
}

#preview-container.dark-mode .prose h1 {
  @apply border-b-gray-700;
}

#preview-container.dark-mode .prose h2 {
  @apply border-b-gray-800;
}

#preview-container.dark-mode .prose a {
  @apply text-blue-400;
}

#preview-container.dark-mode .prose blockquote {
  @apply border-gray-600 text-gray-400;
}

#preview-container.dark-mode .prose code {
  @apply bg-gray-800 text-gray-200;
}

#preview-container.dark-mode .prose pre {
  @apply bg-gray-950;
}

#preview-container.dark-mode .prose hr {
  @apply border-gray-700;
}

#preview-container.dark-mode .prose th,
#preview-container.dark-mode .prose td {
  @apply border-gray-600;
}

#preview-container.dark-mode .prose th {
  @apply bg-gray-800;
}

/* Dark mode toggle button active state */
.cmd-btn.dark-mode-active {
  @apply bg-gray-600 text-white;
}
