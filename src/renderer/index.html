<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0"
    />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src * data: blob:"
    />
    <title>EasyMarkdown</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body class="bg-editor-bg text-editor-text font-sans h-screen flex flex-col overflow-hidden">
    <!-- Title bar drag region (macOS only) -->
    <div id="title-bar-drag" class="h-7 bg-tab-bg flex-shrink-0 app-drag"></div>

    <!-- Tab bar -->
    <div id="tab-bar" class="flex bg-tab-bg border-b border-tab-border flex-shrink-0 overflow-x-auto">
      <div id="tabs" class="flex min-w-0 flex-1"></div>
      <button
        id="new-tab-btn"
        class="px-3 py-2 text-gray-400 hover:text-white hover:bg-tab-hover flex-shrink-0"
        title="New Tab"
      >
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
        </svg>
      </button>
    </div>

    <!-- Command bar -->
    <div id="command-bar" class="flex bg-toolbar-bg border-b border-toolbar-border px-2 py-1 gap-1 flex-shrink-0">
      <button class="cmd-btn" data-format="bold" title="Bold (Cmd+B)">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 4h8a4 4 0 014 4 4 4 0 01-4 4H6z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 12h9a4 4 0 014 4 4 4 0 01-4 4H6z" />
        </svg>
      </button>
      <button class="cmd-btn" data-format="italic" title="Italic (Cmd+I)">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 4h4m-2 0v16m-4 0h8" transform="skewX(-10)" />
        </svg>
      </button>
      <div class="w-px bg-toolbar-border mx-1"></div>
      <button class="cmd-btn" data-format="h1" title="Heading 1 (Cmd+1)">H1</button>
      <button class="cmd-btn" data-format="h2" title="Heading 2 (Cmd+2)">H2</button>
      <button class="cmd-btn" data-format="h3" title="Heading 3 (Cmd+3)">H3</button>
      <div class="w-px bg-toolbar-border mx-1"></div>
      <button class="cmd-btn" data-format="code" title="Inline Code (Cmd+`)">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
        </svg>
      </button>
      <button class="cmd-btn" data-format="codeblock" title="Code Block (Cmd+Shift+`)">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h10M4 18h6" />
        </svg>
      </button>
      <div class="w-px bg-toolbar-border mx-1"></div>
      <button class="cmd-btn" data-format="link" title="Link (Cmd+K)">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1" />
        </svg>
      </button>
      <button class="cmd-btn" data-format="image" title="Image">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" />
        </svg>
      </button>
      <div class="w-px bg-toolbar-border mx-1"></div>
      <button class="cmd-btn" data-format="ul" title="Bulleted List (Cmd+Shift+8)">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </button>
      <button class="cmd-btn" data-format="ol" title="Numbered List (Cmd+Shift+7)">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 6h13M7 12h13M7 18h13M3 6h.01M3 12h.01M3 18h.01" />
        </svg>
      </button>
      <button class="cmd-btn" data-format="quote" title="Blockquote (Cmd+Shift+.)">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
          <path d="M4.583 17.321C3.553 16.227 3 15 3 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 01-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179zm10 0C13.553 16.227 13 15 13 13.011c0-3.5 2.457-6.637 6.03-8.188l.893 1.378c-3.335 1.804-3.987 4.145-4.247 5.621.537-.278 1.24-.375 1.929-.311 1.804.167 3.226 1.648 3.226 3.489a3.5 3.5 0 01-3.5 3.5c-1.073 0-2.099-.49-2.748-1.179z" />
        </svg>
      </button>
      <div class="flex-1"></div>
      <button
        id="toggle-view-btn"
        class="cmd-btn px-3"
        title="Toggle Preview (Cmd+P)"
      >
        <span id="view-mode-label">Preview</span>
      </button>
    </div>

    <!-- Main content area -->
    <div id="content" class="flex-1 flex overflow-hidden">
      <!-- Editor -->
      <div id="editor-container" class="flex-1 flex flex-col overflow-hidden">
        <textarea
          id="editor"
          class="flex-1 bg-editor-bg text-editor-text font-mono text-sm p-4 resize-none outline-none border-none"
          placeholder="Start writing markdown..."
          spellcheck="false"
        ></textarea>
      </div>

      <!-- Preview -->
      <div
        id="preview-container"
        class="flex-1 overflow-auto p-6 bg-white text-gray-900 hidden"
      >
        <div id="preview" class="prose prose-sm max-w-none"></div>
      </div>
    </div>

    <!-- Empty state -->
    <div id="empty-state" class="hidden flex-1 flex items-center justify-center text-gray-500">
      <div class="text-center">
        <p class="text-lg mb-2">No files open</p>
        <p class="text-sm">Press <kbd class="px-2 py-1 bg-gray-700 rounded">Cmd+N</kbd> to create a new file</p>
        <p class="text-sm">or <kbd class="px-2 py-1 bg-gray-700 rounded">Cmd+O</kbd> to open a file</p>
      </div>
    </div>

    <!-- Image Dialog -->
    <div id="image-dialog" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
      <div class="bg-gray-800 rounded-lg shadow-xl w-96 p-6">
        <h3 class="text-lg font-semibold text-white mb-4">Insert Image</h3>

        <div class="space-y-4">
          <!-- Alt text -->
          <div>
            <label class="block text-sm text-gray-300 mb-1">Alt Text</label>
            <input
              type="text"
              id="image-alt"
              class="w-full bg-gray-700 text-white rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="Image description"
            />
          </div>

          <!-- Source type tabs -->
          <div class="flex border-b border-gray-600">
            <button
              id="image-tab-url"
              class="px-4 py-2 text-sm font-medium text-blue-400 border-b-2 border-blue-400"
            >
              URL
            </button>
            <button
              id="image-tab-file"
              class="px-4 py-2 text-sm font-medium text-gray-400 hover:text-gray-300"
            >
              Local File
            </button>
          </div>

          <!-- URL input -->
          <div id="image-url-section">
            <input
              type="text"
              id="image-url"
              class="w-full bg-gray-700 text-white rounded px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
              placeholder="https://example.com/image.png"
            />
          </div>

          <!-- File input -->
          <div id="image-file-section" class="hidden">
            <div class="flex gap-2">
              <input
                type="text"
                id="image-file-path"
                class="flex-1 bg-gray-700 text-white rounded px-3 py-2 text-sm focus:outline-none"
                placeholder="No file selected"
                readonly
              />
              <button
                id="image-file-browse"
                class="px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded text-sm"
              >
                Browse
              </button>
            </div>
          </div>
        </div>

        <!-- Actions -->
        <div class="flex justify-end gap-3 mt-6">
          <button
            id="image-cancel"
            class="px-4 py-2 text-gray-300 hover:text-white text-sm"
          >
            Cancel
          </button>
          <button
            id="image-insert"
            class="px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded text-sm"
          >
            Insert
          </button>
        </div>
      </div>
    </div>

    <script src="renderer.js"></script>
  </body>
</html>
